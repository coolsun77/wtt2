 

  <%
      dateStart = params[:dateStart].to_date
      dateEnd = params[:dateEnd].to_date
      qaprojects = { qawebtime: 0, qaWoWtime: 0, qasc2time: 0, qahstime: 0, qaoverwatchtime: 0, qad3time: 0, qaherotime: 0, qamis: 0, qaab: 0}
      qatasks = ["Pre_QA_H","Review_H", "QA_H", "Bug_Management_H","Audio_QA_H","N_Review_H", "N_QA_H", "N_Bug_Management_H", "Project_Management_H", "Other_H","mis_meeting","mis_training","mis_others","ab_sickleave","ab_shiftleave","ab_annualleave","ab_holiday","ab_others","vpp_H","N_vpp_H"]
    
       
    i=0
      qaprojects.each do |key,value|
        qatasks.each do |qt|
          qaprojects[key] = qaprojects[key] + Qaeod.where(date: dateStart..dateEnd, game_id: i).sum(qt)
        end
        i=i+1
      end


      locprojects = {locwebtime: 0, locWoWtime: 0, locsc2time: 0, lochstime: 0, locoverwatchtime: 0, locd3time: 0, locherotime: 0, locmis: 0, locab: 0}
      loctasks = ["familiarization_H","Review_H","translation_H","bugfix_H","audiodelivery_H", "audioonsite_H" ,"polish_H" ,"N_Review_H","N_translation_H","N_bugfix_H","Project_Management_H","Other_H","mis_meeting","mis_training","mis_others","ab_sickleave","ab_shiftleave","ab_annualleave","ab_holiday","ab_others","vpp_H","N_vpp_H"]
      

    i=0
      locprojects.each do |key, value|
        loctasks.each do |lt|
          locprojects[key] = locprojects[key] + Loceod.where(date: dateStart..dateEnd, game_id: i).sum(lt) 
        end
        i=i+1
      end

      webtime = qaprojects[:qawebtime] + locprojects[:locwebtime]

    wowtime = qaprojects[:qaWoWtime] + locprojects[:locWoWtime]
    qawowp = (qaprojects[:qaWoWtime] / wowtime*100).round(1)
    locwowp = (locprojects[:locWoWtime] / wowtime*100).round(1)

    sc2time =  qaprojects[:qasc2time] + locprojects[:locsc2time]
    qasc2p = (qaprojects[:qasc2time] / wowtime*100).round(1)
    locsc2p = (locprojects[:locsc2time] / wowtime*100).round(1)

    herotime = qaprojects[:qaherotime] + locprojects[:locherotime]
    qaherop = (qaprojects[:qaherotime] / wowtime*100).round(1)
    locherop = (locprojects[:locherotime] / wowtime*100).round(1)

    d3time = qaprojects[:qad3time] + locprojects[:locd3time]
    qad3p = (qaprojects[:qad3time] / wowtime*100).round(1)
    locd3p = (locprojects[:locd3time] / wowtime*100).round(1)

    owtime = qaprojects[:qaoverwatchtime] + locprojects[:locoverwatchtime]
    qaowp = (qaprojects[:qaoverwatchtime] / wowtime*100).round(1)
    locowp = (locprojects[:locoverwatchtime] / wowtime*100).round(1)

    hstime = qaprojects[:qahstime] + locprojects[:lochstime]
    qahsp = (qaprojects[:qahstime] / wowtime*100).round(1)
    lochsp = (locprojects[:lochstime] / wowtime*100).round(1)


    qagameobj = qaprojects[:qaWoWtime] + qaprojects[:qasc2time] + qaprojects[:qaherotime] + qaprojects[:qad3time] + qaprojects[:qaoverwatchtime] + qaprojects[:qahstime]
    qameeting = Qaeod.where(created_at: dateStart..dateEnd, game_id: 7).sum("mis_meeting")
    qatraining = Qaeod.where(created_at: dateStart..dateEnd, game_id: 7).sum("mis_training")
    qaothers = Qaeod.where(created_at: dateStart..dateEnd, game_id: 7).sum("mis_others")
    qaweb = qaprojects[:qawebtime]
    qaab = qaprojects[:qaab]
    qatotal = qagameobj + qameeting + qatraining + qaothers + qaweb + qaab


    locgameobj = locprojects[:locWoWtime] + locprojects[:locsc2time] + locprojects[:locherotime] + locprojects[:locd3time] + locprojects[:locoverwatchtime] + locprojects[:lochstime]
    locmeeting = Qaeod.where(created_at: dateStart..dateEnd, game_id: 7).sum("mis_meeting")
    loctraining = Qaeod.where(created_at: dateStart..dateEnd, game_id: 7).sum("mis_training")
    locothers = Qaeod.where(created_at: dateStart..dateEnd, game_id: 7).sum("mis_others")
    locweb = locprojects[:locwebtime]
    locab = locprojects[:locab]
    loctotal = locgameobj + locmeeting + loctraining + locothers + locweb + locab

    pstotal = qatotal + loctotal
    loctotalp =  (loctotal/pstotal*100).round(1)
    qatotalp = (qatotal/pstotal*100).round(1)


   # qagameobjp = (qagameobj/qatotal*100).round(1)
    qameetingp = (qameeting/qatotal*100).round(1)
    qatrainingp = (qatraining/qatotal*100).round(1)
    qaothersp = (qaothers/qatotal*100).round(1)
    qawebp = (qaweb/qatotal*100).round(1)
    #qaabp = number_to_percentage(qaab/qatotal*100, precision: 2)
    qaabp = (qaab/qatotal*100).round(1)
    qawowtimep = (qaprojects[:qaWoWtime]/qatotal*100).round(1)
    qahstimep = (qaprojects[:qahstime]/qatotal*100).round(1)
    qasc2timep = (qaprojects[:qasc2time]/qatotal*100).round(1)
    qaherotimep = ( qaprojects[:qaherotime]/qatotal*100).round(1)
    qad3timep = (qaprojects[:qad3time]/qatotal*100).round(1)
    qaowtimep = (qaprojects[:qaoverwatchtime]/qatotal*100).round(1)


    locmeetingp = (locmeeting/loctotal*100).round(1)
    loctrainingp = (loctraining/loctotal*100).round(1)
    locothersp = (locothers/loctotal*100).round(1)
    locwebp = (locweb/loctotal*100).round(1)
    locabp = (locab/loctotal*100).round(1)
    locwowtimep = (locprojects[:locWoWtime]/loctotal*100).round(1)
    lochstimep = (locprojects[:lochstime]/loctotal*100).round(1)
    locsc2timep = (locprojects[:locsc2time]/loctotal*100).round(1)
    locherotimep = ( locprojects[:locherotime]/loctotal*100).round(1)
    locd3timep = (locprojects[:locd3time]/loctotal*100).round(1)
    locowtimep = (locprojects[:locoverwatchtime]/loctotal*100).round(1)


    psgameobj = qagameobj + locgameobj
    fwowtime = qaprojects[:qaWoWtime] + locprojects[:locWoWtime]
    fhstime = qaprojects[:qahstime] + locprojects[:lochstime]
    fsc2time =  qaprojects[:qasc2time] + locprojects[:locsc2time]
    fherotime =  qaprojects[:qaherotime] + locprojects[:locherotime]
    fd3time = qaprojects[:qad3time] + locprojects[:locd3time]
    fowtime =  qaprojects[:qaoverwatchtime] + locprojects[:locoverwatchtime]
    fwowtimep = (fwowtime /psgameobj*100).round(1)
    fhstimep = (fhstime /psgameobj*100).round(1)
    fsc2timep = (fsc2time /psgameobj*100).round(1)
    fherotimep = (fherotime /psgameobj*100).round(1)
    fd3timep = (fd3time/psgameobj*100).round(1)
    fowtimep = (fowtime/psgameobj*100).round(1)

 
   %>
<%
qaingameprojects = { qawebtime: 0, qaWoWtime: 0, qasc2time: 0, qahstime: 0, qaoverwatchtime: 0, qad3time: 0, qaherotime: 0}
qanongameprojects = { qawebtime: 0, qaWoWtime: 0, qasc2time: 0, qahstime: 0, qaoverwatchtime: 0, qad3time: 0, qaherotime: 0}
      qaingametasks = ["Pre_QA_H","Review_H", "QA_H", "Bug_Management_H","Audio_QA_H","vpp_H","Project_Management_H"]
      qanongametasks = ["N_Review_H", "N_QA_H", "N_Bug_Management_H","N_vpp_H"]


     
    i=0
      qaingameprojects.each do |key,value|
        qaingametasks.each do |qt|
          qaingameprojects[key] = qaingameprojects[key] + Qaeod.where(date: dateStart..dateEnd, game_id: i).sum(qt)
        end
        i=i+1
      end

    qaingame = 0
    qaingameprojects.each do |key,value|
      qaingame = qaingame + value
    end


    i=0
      qanongameprojects.each do |key,value|
        qanongametasks.each do |qt|
          qanongameprojects[key] = qanongameprojects[key] + Qaeod.where(date: dateStart..dateEnd, game_id: i).sum(qt)
        end
        i=i+1
      end

    qanongame = 0
    qanongameprojects.each do |key,value|
      qanongame = qanongame + value
    end


  
      locingameprojects = {locwebtime: 0, locWoWtime: 0, locsc2time: 0, lochstime: 0, locoverwatchtime: 0, locd3time: 0, locherotime: 0}
      locnongameprojects = {locwebtime: 0, locWoWtime: 0, locsc2time: 0, lochstime: 0, locoverwatchtime: 0, locd3time: 0, locherotime: 0}
      locingametasks = ["familiarization_H","Review_H","translation_H","bugfix_H","audiodelivery_H", "audioonsite_H" , "polish_H", "vpp_H" ,"Project_Management_H"]
      locnongametasks = ["N_Review_H","N_translation_H","N_bugfix_H","N_vpp_H"]
      

    i=0
      locingameprojects.each do |key, value|
        locingametasks.each do |lt|
          locingameprojects[key] = locingameprojects[key] + Loceod.where(date: dateStart..dateEnd, game_id: i).sum(lt) 
        end
        i=i+1
      end

    locingame = 0
    locingameprojects.each do |key,value|
      locingame = locingame + value
    end


    i=0
      locnongameprojects.each do |key, value|
        locnongametasks.each do |lt|
          locnongameprojects[key] = locnongameprojects[key] + Loceod.where(date: dateStart..dateEnd, game_id: i).sum(lt) 
        end
        i=i+1
      end
    locnongame = 0
    locnongameprojects.each do |key,value|
      locnongame = locnongame + value
    end

    ingame = qaingame + locingame
    nongame = locnongame + qanongame

    pgame = ingame + nongame

    ingamep = (ingame / (ingame + nongame)*100).round(1)
    nongamep = (nongame / (ingame + nongame)*100).round(1)

    locingamep = (locingame / (ingame + nongame)*100).round(1)
    qaingamep = (qaingame / (ingame + nongame)*100).round(1)
    qanongamep = (qanongame / (ingame + nongame)*100).round(1)
    locnongamep = (locnongame / (ingame + nongame)*100).round(1)

    locwowingamep = (locingameprojects[:locWoWtime] / pgame*100).round(1)
    locsc2ingamep = (locingameprojects[:locsc2time] / pgame*100).round(1)
    lochsingamep = (locingameprojects[:lochstime] / pgame*100).round(1)
    locowingamep = (locingameprojects[:locoverwatchtime] / pgame*100).round(1)
    locd3ingamep = (locingameprojects[:locd3time] / pgame*100).round(1)
    locheroingamep = (locingameprojects[:locherotime] / pgame*100).round(1)


    locwownongamep =  (locnongameprojects[:locWoWtime] / pgame*100).round(1)
    locsc2nongamep =  (locnongameprojects[:locsc2time] / pgame*100).round(1)
    lochsnongamep =  (locnongameprojects[:lochstime] / pgame*100).round(1)
    locownongamep =  (locnongameprojects[:locoverwatchtime] / pgame*100).round(1)
    locd3nongamep =  (locnongameprojects[:locd3time] / pgame*100).round(1)
    locheronongamep =  (locnongameprojects[:locherotime] / pgame*100).round(1)





%>


<%
  wowingamelocreview = Loceod.where(date: dateStart..dateEnd, game_id: 1).sum("Review_H") 
  wowingameloctranslation = Loceod.where(date: dateStart..dateEnd, game_id: 1).sum("translation_H") 
  wowingamelocbugfix = Loceod.where(date: dateStart..dateEnd, game_id: 1).sum("bugfix_H") 
  wowingamelocpolish = Loceod.where(date: dateStart..dateEnd, game_id: 1).sum("polish_H") 

  wowingamet = 0.0 + wowingamelocreview + wowingameloctranslation + wowingamelocbugfix + wowingamelocpolish

  wowingamelocreviewp = (wowingamelocreview / wowingamet *100).round(1)
  wowingameloctranslationp = (wowingameloctranslation / wowingamet *100).round(1)
  wowingamelocbugfixp = (wowingamelocbugfix / wowingamet *100).round(1)
  wowingamelocpolishp = (wowingamelocpolish / wowingamet *100).round(1)


%>

<div class="container-fluid">
  <div class="row-fluid">
    <div class="span12">

  <table class="table" contenteditable="true">
  <thead>
    <tr class="info">
      <th>wowlocingame</th>
      <th>Hours</th>
      <th>%</th>
    </tr>
  </thead>
  <tbody>
    <tr class="info">
      <td>Review</td>
      <td><%=wowingamelocreview%></td>
      <td><%=wowingamelocreviewp%>%</td>
    </tr>
    <tr class="info">
      <td>Translation</td>
      <td><%=wowingameloctranslation%></td>
      <td><%=wowingameloctranslationp%>%</td>
    </tr>
    <tr class="info">
      <td>Bug-fixing</td>
      <td><%=wowingamelocbugfix%></td>
      <td><%=wowingamelocbugfixp%>%</td>
    </tr>
    <tr class="info">
      <td>In-game Polishing </td>
      <td><%=wowingamelocpolish%></td>
      <td><%=wowingamelocpolishp%>%</td>
    </tr>
  </tbody>
</table>

<div id="containerwowlocingame" style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto"></div>



 <script type="text/javascript">
$(function () {
    $('#containerwowlocingame').highcharts({
        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        title: {
            text: 'wowlocingame'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                    style: {
                        color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                    }
                }
            }
        },
        series: [{
            type: 'pie',
            name: 'wowlocingame',
            data: [
                ['wowingamelocreview',    <%=wowingamelocreviewp%>],
                ['wowingameloctranslation',    <%=wowingameloctranslationp%>],
                ['wowingamelocbugfix',    <%=wowingamelocbugfixp%>],
                {
                    name: 'wowingamelocpolish',
                    y: <%=wowingamelocpolishp%>,
                    sliced: true,
                    selected: true
                },
               
    
            ]
        }]
    });
});

    </script>

<%
  sc2ingamelocreview = Loceod.where(date: dateStart..dateEnd, game_id: 2).sum("Review_H") 
  sc2ingameloctranslation = Loceod.where(date: dateStart..dateEnd, game_id: 2).sum("translation_H") 
  sc2ingamelocbugfix = Loceod.where(date: dateStart..dateEnd, game_id: 2).sum("bugfix_H") 
  sc2ingamelocpolish = Loceod.where(date: dateStart..dateEnd, game_id: 2).sum("polish_H") 

  sc2ingamet = 0.0 + sc2ingamelocreview + sc2ingameloctranslation + sc2ingamelocbugfix + sc2ingamelocpolish

  sc2ingamelocreviewp = (sc2ingamelocreview / sc2ingamet *100).round(1)
  sc2ingameloctranslationp = (sc2ingameloctranslation / sc2ingamet *100).round(1)
  sc2ingamelocbugfixp = (sc2ingamelocbugfix / sc2ingamet *100).round(1)
  sc2ingamelocpolishp = (sc2ingamelocpolish / sc2ingamet *100).round(1)


%>

<div class="container-fluid">
  <div class="row-fluid">
    <div class="span12">

  <table class="table" contenteditable="true">
  <thead>
    <tr class="info">
      <th>sc2locingame</th>
      <th>Hours</th>
      <th>%</th>
    </tr>
  </thead>
  <tbody>
    <tr class="info">
      <td>Review</td>
      <td><%=sc2ingamelocreview%></td>
      <td><%=sc2ingamelocreviewp%>%</td>
    </tr>
    <tr class="info">
      <td>Translation</td>
      <td><%=sc2ingameloctranslation%></td>
      <td><%=sc2ingameloctranslationp%>%</td>
    </tr>
    <tr class="info">
      <td>Bug-fixing</td>
      <td><%=sc2ingamelocbugfix%></td>
      <td><%=sc2ingamelocbugfixp%>%</td>
    </tr>
    <tr class="info">
      <td>In-game Polishing </td>
      <td><%=sc2ingamelocpolish%></td>
      <td><%=sc2ingamelocpolishp%>%</td>
    </tr>
  </tbody>
</table>

<div id="containersc2locingame" style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto"></div>



 <script type="text/javascript">
$(function () {
    $('#containersc2locingame').highcharts({
        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        title: {
            text: 'sc2locingame'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                    style: {
                        color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                    }
                }
            }
        },
        series: [{
            type: 'pie',
            name: 'sc2locingame',
            data: [
                ['sc2ingamelocreview',    <%=sc2ingamelocreviewp%>],
                ['sc2ingameloctranslation',    <%=sc2ingameloctranslationp%>],
                ['sc2ingamelocbugfix',    <%=sc2ingamelocbugfixp%>],
                {
                    name: 'sc2ingamelocpolish',
                    y: <%=sc2ingamelocpolishp%>,
                    sliced: true,
                    selected: true
                },
               
    
            ]
        }]
    });
});

    </script>
<%
  hsingamelocreview = Loceod.where(date: dateStart..dateEnd, game_id: 3).sum("Review_H") 
  hsingameloctranslation = Loceod.where(date: dateStart..dateEnd, game_id: 3).sum("translation_H") 
  hsingamelocbugfix = Loceod.where(date: dateStart..dateEnd, game_id: 3).sum("bugfix_H") 
  hsingamelocpolish = Loceod.where(date: dateStart..dateEnd, game_id: 3).sum("polish_H") 

  hsingamet = 0.0 + hsingamelocreview + hsingameloctranslation + hsingamelocbugfix + hsingamelocpolish

  hsingamelocreviewp = (hsingamelocreview / hsingamet *100).round(1)
  hsingameloctranslationp = (hsingameloctranslation / hsingamet *100).round(1)
  hsingamelocbugfixp = (hsingamelocbugfix / hsingamet *100).round(1)
  hsingamelocpolishp = (hsingamelocpolish / hsingamet *100).round(1)


%>

<div class="container-fluid">
  <div class="row-fluid">
    <div class="span12">

  <table class="table" contenteditable="true">
  <thead>
    <tr class="info">
      <th>hslocingame</th>
      <th>Hours</th>
      <th>%</th>
    </tr>
  </thead>
  <tbody>
    <tr class="info">
      <td>Review</td>
      <td><%=hsingamelocreview%></td>
      <td><%=hsingamelocreviewp%>%</td>
    </tr>
    <tr class="info">
      <td>Translation</td>
      <td><%=hsingameloctranslation%></td>
      <td><%=hsingameloctranslationp%>%</td>
    </tr>
    <tr class="info">
      <td>Bug-fixing</td>
      <td><%=hsingamelocbugfix%></td>
      <td><%=hsingamelocbugfixp%>%</td>
    </tr>
    <tr class="info">
      <td>In-game Polishing </td>
      <td><%=hsingamelocpolish%></td>
      <td><%=hsingamelocpolishp%>%</td>
    </tr>
  </tbody>
</table>

<div id="containerhslocingame" style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto"></div>



 <script type="text/javascript">
$(function () {
    $('#containerhslocingame').highcharts({
        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        title: {
            text: 'hslocingame'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                    style: {
                        color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                    }
                }
            }
        },
        series: [{
            type: 'pie',
            name: 'hslocingame',
            data: [
                ['hsingamelocreview',    <%=hsingamelocreviewp%>],
                ['hsingameloctranslation',    <%=hsingameloctranslationp%>],
                ['hsingamelocbugfix',    <%=hsingamelocbugfixp%>],
                {
                    name: 'hsingamelocpolish',
                    y: <%=hsingamelocpolishp%>,
                    sliced: true,
                    selected: true
                },
               
    
            ]
        }]
    });
});

    </script>

    <%
  overwatchingamelocreview = Loceod.where(date: dateStart..dateEnd, game_id: 4).sum("Review_H") 
  overwatchingameloctranslation = Loceod.where(date: dateStart..dateEnd, game_id: 4).sum("translation_H") 
  overwatchingamelocbugfix = Loceod.where(date: dateStart..dateEnd, game_id: 4).sum("bugfix_H") 
  overwatchingamelocpolish = Loceod.where(date: dateStart..dateEnd, game_id: 4).sum("polish_H") 

  overwatchingamet = 0.0 + overwatchingamelocreview + overwatchingameloctranslation + overwatchingamelocbugfix + overwatchingamelocpolish

  overwatchingamelocreviewp = (overwatchingamelocreview / overwatchingamet *100).round(1)
  overwatchingameloctranslationp = (overwatchingameloctranslation / overwatchingamet *100).round(1)
  overwatchingamelocbugfixp = (overwatchingamelocbugfix / overwatchingamet *100).round(1)
  overwatchingamelocpolishp = (overwatchingamelocpolish / overwatchingamet *100).round(1)


%>

<div class="container-fluid">
  <div class="row-fluid">
    <div class="span12">

  <table class="table" contenteditable="true">
  <thead>
    <tr class="info">
      <th>overwatchlocingame</th>
      <th>Hours</th>
      <th>%</th>
    </tr>
  </thead>
  <tbody>
    <tr class="info">
      <td>Review</td>
      <td><%=overwatchingamelocreview%></td>
      <td><%=overwatchingamelocreviewp%>%</td>
    </tr>
    <tr class="info">
      <td>Translation</td>
      <td><%=overwatchingameloctranslation%></td>
      <td><%=overwatchingameloctranslationp%>%</td>
    </tr>
    <tr class="info">
      <td>Bug-fixing</td>
      <td><%=overwatchingamelocbugfix%></td>
      <td><%=overwatchingamelocbugfixp%>%</td>
    </tr>
    <tr class="info">
      <td>In-game Polishing </td>
      <td><%=overwatchingamelocpolish%></td>
      <td><%=overwatchingamelocpolishp%>%</td>
    </tr>
  </tbody>
</table>

<div id="containeroverwatchlocingame" style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto"></div>



 <script type="text/javascript">
$(function () {
    $('#containeroverwatchlocingame').highcharts({
        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        title: {
            text: 'overwatchlocingame'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                    style: {
                        color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                    }
                }
            }
        },
        series: [{
            type: 'pie',
            name: 'overwatchlocingame',
            data: [
                ['overwatchingamelocreview',    <%=overwatchingamelocreviewp%>],
                ['overwatchingameloctranslation',    <%=overwatchingameloctranslationp%>],
                ['overwatchingamelocbugfix',    <%=overwatchingamelocbugfixp%>],
                {
                    name: 'overwatchingamelocpolish',
                    y: <%=overwatchingamelocpolishp%>,
                    sliced: true,
                    selected: true
                },
               
    
            ]
        }]
    });
});

    </script>

    <%
  d3ingamelocreview = Loceod.where(date: dateStart..dateEnd, game_id: 5).sum("Review_H") 
  d3ingameloctranslation = Loceod.where(date: dateStart..dateEnd, game_id: 5).sum("translation_H") 
  d3ingamelocbugfix = Loceod.where(date: dateStart..dateEnd, game_id: 5).sum("bugfix_H") 
  d3ingamelocpolish = Loceod.where(date: dateStart..dateEnd, game_id: 5).sum("polish_H") 

  d3ingamet = 0.0 + d3ingamelocreview + d3ingameloctranslation + d3ingamelocbugfix + d3ingamelocpolish

  d3ingamelocreviewp = (d3ingamelocreview / d3ingamet *100).round(1)
  d3ingameloctranslationp = (d3ingameloctranslation / d3ingamet *100).round(1)
  d3ingamelocbugfixp = (d3ingamelocbugfix / d3ingamet *100).round(1)
  d3ingamelocpolishp = (d3ingamelocpolish / d3ingamet *100).round(1)


%>

<div class="container-fluid">
  <div class="row-fluid">
    <div class="span12">

  <table class="table" contenteditable="true">
  <thead>
    <tr class="info">
      <th>d3locingame</th>
      <th>Hours</th>
      <th>%</th>
    </tr>
  </thead>
  <tbody>
    <tr class="info">
      <td>Review</td>
      <td><%=d3ingamelocreview%></td>
      <td><%=d3ingamelocreviewp%>%</td>
    </tr>
    <tr class="info">
      <td>Translation</td>
      <td><%=d3ingameloctranslation%></td>
      <td><%=d3ingameloctranslationp%>%</td>
    </tr>
    <tr class="info">
      <td>Bug-fixing</td>
      <td><%=d3ingamelocbugfix%></td>
      <td><%=d3ingamelocbugfixp%>%</td>
    </tr>
    <tr class="info">
      <td>In-game Polishing </td>
      <td><%=d3ingamelocpolish%></td>
      <td><%=d3ingamelocpolishp%>%</td>
    </tr>
  </tbody>
</table>

<div id="containerd3locingame" style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto"></div>



 <script type="text/javascript">
$(function () {
    $('#containerd3locingame').highcharts({
        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        title: {
            text: 'd3locingame'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                    style: {
                        color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                    }
                }
            }
        },
        series: [{
            type: 'pie',
            name: 'd3locingame',
            data: [
                ['d3ingamelocreview',    <%=d3ingamelocreviewp%>],
                ['d3ingameloctranslation',    <%=d3ingameloctranslationp%>],
                ['d3ingamelocbugfix',    <%=d3ingamelocbugfixp%>],
                {
                    name: 'd3ingamelocpolish',
                    y: <%=d3ingamelocpolishp%>,
                    sliced: true,
                    selected: true
                },
               
    
            ]
        }]
    });
});

    </script>

    <%
  heroingamelocreview = Loceod.where(date: dateStart..dateEnd, game_id: 6).sum("Review_H") 
  heroingameloctranslation = Loceod.where(date: dateStart..dateEnd, game_id: 6).sum("translation_H") 
  heroingamelocbugfix = Loceod.where(date: dateStart..dateEnd, game_id: 6).sum("bugfix_H") 
  heroingamelocpolish = Loceod.where(date: dateStart..dateEnd, game_id: 6).sum("polish_H") 

  heroingamet = 0.0 + heroingamelocreview + heroingameloctranslation + heroingamelocbugfix + heroingamelocpolish

  heroingamelocreviewp = (heroingamelocreview / heroingamet *100).round(1)
  heroingameloctranslationp = (heroingameloctranslation / heroingamet *100).round(1)
  heroingamelocbugfixp = (heroingamelocbugfix / heroingamet *100).round(1)
  heroingamelocpolishp = (heroingamelocpolish / heroingamet *100).round(1)


%>

<div class="container-fluid">
  <div class="row-fluid">
    <div class="span12">

  <table class="table" contenteditable="true">
  <thead>
    <tr class="info">
      <th>herolocingame</th>
      <th>Hours</th>
      <th>%</th>
    </tr>
  </thead>
  <tbody>
    <tr class="info">
      <td>Review</td>
      <td><%=heroingamelocreview%></td>
      <td><%=heroingamelocreviewp%>%</td>
    </tr>
    <tr class="info">
      <td>Translation</td>
      <td><%=heroingameloctranslation%></td>
      <td><%=heroingameloctranslationp%>%</td>
    </tr>
    <tr class="info">
      <td>Bug-fixing</td>
      <td><%=heroingamelocbugfix%></td>
      <td><%=heroingamelocbugfixp%>%</td>
    </tr>
    <tr class="info">
      <td>In-game Polishing </td>
      <td><%=heroingamelocpolish%></td>
      <td><%=heroingamelocpolishp%>%</td>
    </tr>
  </tbody>
</table>

<div id="containerherolocingame" style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto"></div>



 <script type="text/javascript">
$(function () {
    $('#containerherolocingame').highcharts({
        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false
        },
        title: {
            text: 'herolocingame'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                    style: {
                        color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                    }
                }
            }
        },
        series: [{
            type: 'pie',
            name: 'herolocingame',
            data: [
                ['heroingamelocreview',    <%=heroingamelocreviewp%>],
                ['heroingameloctranslation',    <%=heroingameloctranslationp%>],
                ['heroingamelocbugfix',    <%=heroingamelocbugfixp%>],
                {
                    name: 'heroingamelocpolish',
                    y: <%=heroingamelocpolishp%>,
                    sliced: true,
                    selected: true
                },
               
    
            ]
        }]
    });
});

    </script>

    </div>
  </div>
</div>




